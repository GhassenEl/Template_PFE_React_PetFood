<!doctype html>
<html lang="fr" class="light-mode">
  <head>
    <!-- Toutes les balises head existantes restent inchangées -->
    <!-- ... -->
  </head>
  <body>
    <!-- Sidebar existante reste inchangée -->
    <!-- ... -->

    <!-- Main Content -->
    <div class="main-content">
      <!-- Topbar existante reste inchangée -->
      <!-- ... -->

      <!-- Notifications Panel existant reste inchangé -->
      <!-- ... -->

      <!-- Dashboard Content -->
      <div class="dashboard-content">
        <!-- Welcome Banner existant reste inchangé -->
        <!-- ... -->

        <!-- Section Dashboard existante reste inchangée -->
        <!-- ... -->

        <!-- NOUVELLE SECTION : Interface Utilisateur Produit -->
        <div id="userProductSection" class="dashboard-section" style="display: none">
          <div class="section-header">
            <h2><i class="fas fa-shopping-bag"></i> Interface Utilisateur - Produits</h2>
            <button class="btn btn-primary" id="backToDashboardBtn">
              <i class="fas fa-arrow-left"></i> Retour au tableau de bord
            </button>
          </div>

          <!-- Navigation entre les différentes fonctionnalités -->
          <div class="user-nav-tabs">
            <div class="nav-tabs-container">
              <button class="nav-tab active" data-tab="browse">Parcourir les produits</button>
              <button class="nav-tab" data-tab="view">Consulter un produit</button>
              <button class="nav-tab" data-tab="add">Ajouter un produit</button>
              <button class="nav-tab" data-tab="order">Passer commande</button>
            </div>
          </div>

          <!-- Onglet 1: Parcourir les produits -->
          <div class="user-tab-content active" id="browseTab">
            <div class="tab-header">
              <h3><i class="fas fa-th-large"></i> Catalogue des produits</h3>
              <div class="search-box">
                <input type="text" id="productSearch" placeholder="Rechercher un produit...">
                <i class="fas fa-search"></i>
              </div>
            </div>

            <div class="product-filters">
              <div class="filter-group">
                <label for="categoryFilter"><i class="fas fa-filter"></i> Catégorie :</label>
                <select id="categoryFilter">
                  <option value="all">Toutes les catégories</option>
                  <option value="chien">Chien</option>
                  <option value="chat">Chat</option>
                </select>
              </div>
              <div class="filter-group">
                <label for="priceFilter"><i class="fas fa-sort-amount-down"></i> Trier par :</label>
                <select id="priceFilter">
                  <option value="name">Nom (A-Z)</option>
                  <option value="price-low">Prix croissant</option>
                  <option value="price-high">Prix décroissant</option>
                  <option value="stock">Stock disponible</option>
                </select>
              </div>
              <button class="btn btn-success" id="applyFiltersBtn">
                <i class="fas fa-filter"></i> Appliquer les filtres
              </button>
            </div>

            <div class="product-grid" id="productGrid">
              <!-- Les produits seront chargés dynamiquement ici -->
            </div>
          </div>

          <!-- Onglet 2: Consulter un produit -->
          <div class="user-tab-content" id="viewTab">
            <div class="tab-header">
              <h3><i class="fas fa-eye"></i> Consulter un produit</h3>
            </div>

            <div class="product-view-container">
              <div class="product-view-search">
                <div class="search-box large">
                  <input type="text" id="productIdSearch" placeholder="Entrez l'ID ou le nom du produit...">
                  <button class="btn btn-primary" id="searchProductBtn">
                    <i class="fas fa-search"></i> Rechercher
                  </button>
                </div>
              </div>

              <div class="product-details-card" id="productDetailsCard" style="display: none;">
                <div class="product-details-header">
                  <h3 id="productDetailsName"></h3>
                  <span class="product-category-badge" id="productDetailsCategory"></span>
                </div>
                
                <div class="product-details-body">
                  <div class="product-image-large">
                    <img id="productDetailsImage" src="" alt="Produit">
                  </div>
                  
                  <div class="product-info">
                    <div class="info-row">
                      <span class="info-label"><i class="fas fa-tag"></i> Prix :</span>
                      <span class="info-value price-dt" id="productDetailsPrice"></span>
                    </div>
                    <div class="info-row">
                      <span class="info-label"><i class="fas fa-boxes"></i> Stock :</span>
                      <span class="info-value" id="productDetailsStock"></span>
                    </div>
                    <div class="info-row">
                      <span class="info-label"><i class="fas fa-truck"></i> Fournisseur :</span>
                      <span class="info-value" id="productDetailsSupplier"></span>
                    </div>
                    <div class="info-row">
                      <span class="info-label"><i class="fas fa-star"></i> Popularité :</span>
                      <span class="info-value">
                        <i class="fas fa-star" style="color: #FFD700;"></i>
                        <i class="fas fa-star" style="color: #FFD700;"></i>
                        <i class="fas fa-star" style="color: #FFD700;"></i>
                        <i class="fas fa-star" style="color: #FFD700;"></i>
                        <i class="fas fa-star-half-alt" style="color: #FFD700;"></i>
                        (4.5/5)
                      </span>
                    </div>
                    
                    <div class="product-description" id="productDetailsDescription">
                      <!-- La description sera chargée dynamiquement -->
                    </div>
                    
                    <div class="product-actions">
                      <button class="btn btn-primary" id="orderThisProductBtn">
                        <i class="fas fa-shopping-cart"></i> Commander ce produit
                      </button>
                      <button class="btn btn-secondary" id="editProductBtn">
                        <i class="fas fa-edit"></i> Modifier
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Onglet 3: Ajouter un produit -->
          <div class="user-tab-content" id="addTab">
            <div class="tab-header">
              <h3><i class="fas fa-plus-circle"></i> Ajouter un nouveau produit</h3>
            </div>

            <div class="add-product-form-container">
              <form id="addProductForm">
                <div class="form-row">
                  <div class="form-group half">
                    <label for="newProductName"><i class="fas fa-signature"></i> Nom du produit *</label>
                    <input type="text" id="newProductName" placeholder="Ex: Croquettes chien premium" required>
                  </div>
                  
                  <div class="form-group half">
                    <label for="newProductCategory"><i class="fas fa-list"></i> Catégorie *</label>
                    <select id="newProductCategory" required>
                      <option value="">Sélectionnez une catégorie</option>
                      <option value="chien">Chien</option>
                      <option value="chat">Chat</option>
                      <option value="rongeur">Rongeur</option>
                      <option value="oiseau">Oiseau</option>
                      <option value="autre">Autre</option>
                    </select>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group half">
                    <label for="newProductPrice"><i class="fas fa-money-bill-wave"></i> Prix (DT) *</label>
                    <input type="number" id="newProductPrice" step="0.001" min="0" placeholder="Ex: 85.500" required>
                  </div>
                  
                  <div class="form-group half">
                    <label for="newProductStock"><i class="fas fa-boxes"></i> Quantité en stock *</label>
                    <input type="number" id="newProductStock" min="0" placeholder="Ex: 50" required>
                  </div>
                </div>

                <div class="form-group">
                  <label for="newProductSupplier"><i class="fas fa-truck"></i> Fournisseur</label>
                  <input type="text" id="newProductSupplier" placeholder="Ex: Royal Canin TN">
                </div>

                <div class="form-group">
                  <label for="newProductImage"><i class="fas fa-image"></i> URL de l'image</label>
                  <input type="url" id="newProductImage" placeholder="https://example.com/image.jpg">
                  <small class="form-hint">Laisser vide pour utiliser une image par défaut</small>
                </div>

                <div class="form-group">
                  <label for="newProductDescription"><i class="fas fa-file-alt"></i> Description</label>
                  <textarea id="newProductDescription" rows="4" placeholder="Décrivez le produit..."></textarea>
                </div>

                <div class="form-actions">
                  <button type="submit" class="btn btn-success" id="submitProductBtn">
                    <i class="fas fa-save"></i> Ajouter le produit
                  </button>
                  <button type="reset" class="btn btn-secondary">
                    <i class="fas fa-redo"></i> Réinitialiser
                  </button>
                </div>
              </form>
            </div>
          </div>

          <!-- Onglet 4: Passer commande -->
          <div class="user-tab-content" id="orderTab">
            <div class="tab-header">
              <h3><i class="fas fa-shopping-cart"></i> Passer une commande</h3>
            </div>

            <div class="order-process-container">
              <div class="order-steps">
                <div class="step active" data-step="1">
                  <div class="step-number">1</div>
                  <div class="step-label">Sélectionner le produit</div>
                </div>
                <div class="step" data-step="2">
                  <div class="step-number">2</div>
                  <div class="step-label">Choisir la quantité</div>
                </div>
                <div class="step" data-step="3">
                  <div class="step-number">3</div>
                  <div class="step-label">Informations de livraison</div>
                </div>
                <div class="step" data-step="4">
                  <div class="step-number">4</div>
                  <div class="step-label">Confirmation</div>
                </div>
              </div>

              <!-- Étape 1: Sélection du produit -->
              <div class="order-step-content active" data-step="1">
                <h4><i class="fas fa-box"></i> Sélectionnez un produit</h4>
                <div class="product-selection-grid" id="productSelectionGrid">
                  <!-- Les produits pour la commande seront chargés ici -->
                </div>
                <div class="step-actions">
                  <button class="btn btn-primary" id="nextToStep2Btn" disabled>
                    <i class="fas fa-arrow-right"></i> Suivant
                  </button>
                </div>
              </div>

              <!-- Étape 2: Quantité -->
              <div class="order-step-content" data-step="2">
                <h4><i class="fas fa-sort-amount-up"></i> Choisir la quantité</h4>
                <div class="selected-product-info" id="selectedProductInfo">
                  <!-- Les infos du produit sélectionné seront affichées ici -->
                </div>
                
                <div class="quantity-selector">
                  <label for="orderQuantity">Quantité :</label>
                  <div class="quantity-controls">
                    <button class="quantity-btn" id="decreaseQuantity">-</button>
                    <input type="number" id="orderQuantity" value="1" min="1" max="100">
                    <button class="quantity-btn" id="increaseQuantity">+</button>
                  </div>
                  <div class="quantity-stock">
                    Stock disponible: <span id="availableStock">0</span> unités
                  </div>
                </div>
                
                <div class="order-summary-preview">
                  <h5>Récapitulatif :</h5>
                  <div class="summary-row">
                    <span>Produit :</span>
                    <span id="summaryProductName">-</span>
                  </div>
                  <div class="summary-row">
                    <span>Prix unitaire :</span>
                    <span id="summaryUnitPrice" class="price-dt">0.000</span>
                  </div>
                  <div class="summary-row">
                    <span>Quantité :</span>
                    <span id="summaryQuantity">0</span>
                  </div>
                  <div class="summary-row total">
                    <span>Total :</span>
                    <span id="summaryTotalPrice" class="price-dt">0.000</span>
                  </div>
                </div>
                
                <div class="step-actions">
                  <button class="btn btn-secondary" id="backToStep1Btn">
                    <i class="fas fa-arrow-left"></i> Retour
                  </button>
                  <button class="btn btn-primary" id="nextToStep3Btn">
                    <i class="fas fa-arrow-right"></i> Suivant
                  </button>
                </div>
              </div>

              <!-- Étape 3: Informations de livraison -->
              <div class="order-step-content" data-step="3">
                <h4><i class="fas fa-truck"></i> Informations de livraison</h4>
                
                <div class="delivery-form">
                  <div class="form-row">
                    <div class="form-group half">
                      <label for="customerName"><i class="fas fa-user"></i> Nom complet *</label>
                      <input type="text" id="customerName" placeholder="Votre nom" required>
                    </div>
                    
                    <div class="form-group half">
                      <label for="customerPhone"><i class="fas fa-phone"></i> Téléphone *</label>
                      <input type="tel" id="customerPhone" placeholder="+216 XX XXX XXX" required>
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="deliveryAddress"><i class="fas fa-map-marker-alt"></i> Adresse de livraison *</label>
                    <input type="text" id="deliveryAddress" placeholder="Adresse complète" required>
                  </div>
                  
                  <div class="form-row">
                    <div class="form-group half">
                      <label for="deliveryCity"><i class="fas fa-city"></i> Ville *</label>
                      <select id="deliveryCity" required>
                        <option value="">Sélectionnez une ville</option>
                        <option value="tunis">Tunis</option>
                        <option value="sfax">Sfax</option>
                        <option value="sousse">Sousse</option>
                        <option value="ariana">Ariana</option>
                        <option value="nabeul">Nabeul</option>
                        <option value="bizerte">Bizerte</option>
                        <option value="monastir">Monastir</option>
                        <option value="kairouan">Kairouan</option>
                        <option value="gabes">Gabès</option>
                        <option value="gafsa">Gafsa</option>
                      </select>
                    </div>
                    
                    <div class="form-group half">
                      <label for="deliveryDate"><i class="fas fa-calendar-alt"></i> Date de livraison souhaitée *</label>
                      <input type="date" id="deliveryDate" required>
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="orderNotes"><i class="fas fa-sticky-note"></i> Notes supplémentaires</label>
                    <textarea id="orderNotes" rows="3" placeholder="Instructions spéciales, code de porte..."></textarea>
                  </div>
                </div>
                
                <div class="step-actions">
                  <button class="btn btn-secondary" id="backToStep2Btn2">
                    <i class="fas fa-arrow-left"></i> Retour
                  </button>
                  <button class="btn btn-primary" id="nextToStep4Btn">
                    <i class="fas fa-arrow-right"></i> Suivant
                  </button>
                </div>
              </div>

              <!-- Étape 4: Confirmation -->
              <div class="order-step-content" data-step="4">
                <h4><i class="fas fa-check-circle"></i> Confirmer votre commande</h4>
                
                <div class="order-confirmation">
                  <div class="confirmation-success" id="confirmationSuccess" style="display: none;">
                    <div class="success-icon">
                      <i class="fas fa-check-circle"></i>
                    </div>
                    <h5>Commande passée avec succès !</h5>
                    <p id="confirmationMessage"></p>
                    <div class="order-number">
                      Votre numéro de commande : <strong id="orderNumber">#000</strong>
                    </div>
                  </div>
                  
                  <div class="order-final-summary" id="orderFinalSummary">
                    <!-- Le récapitulatif final sera affiché ici -->
                  </div>
                  
                  <div class="confirmation-actions" id="confirmationActions">
                    <button class="btn btn-success" id="confirmOrderBtn">
                      <i class="fas fa-check"></i> Confirmer et payer
                    </button>
                    <button class="btn btn-secondary" id="backToStep3Btn">
                      <i class="fas fa-arrow-left"></i> Retour
                    </button>
                  </div>
                  
                  <div class="print-actions" id="printActions" style="display: none;">
                    <button class="btn btn-primary" id="printOrderBtn">
                      <i class="fas fa-print"></i> Imprimer le reçu
                    </button>
                    <button class="btn btn-secondary" id="newOrderBtn">
                      <i class="fas fa-plus"></i> Nouvelle commande
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Les autres sections existantes restent inchangées -->
        <!-- Section Commandes -->
        <div id="ordersSection" class="dashboard-section" style="display: none">
          <!-- ... -->
        </div>

        <!-- Section Produits -->
        <div id="productsSection" class="dashboard-section" style="display: none">
          <!-- ... -->
        </div>

        <!-- Section Clients -->
        <div id="customersSection" class="dashboard-section" style="display: none">
          <!-- ... -->
        </div>

        <!-- Section Historique -->
        <div id="historySection" class="dashboard-section" style="display: none">
          <!-- ... -->
        </div>
      </div>

      <!-- Footer existant reste inchangé -->
      <!-- ... -->
    </div>

    <!-- Les modals existants restent inchangés -->
    <!-- ... -->

    <!-- Notification Toast existant reste inchangé -->
    <!-- ... -->

    <script>
      // Ajouter un élément de menu pour l'interface utilisateur dans la sidebar
      document.addEventListener('DOMContentLoaded', function() {
        // Ajouter un élément de menu pour l'interface utilisateur
        const menu = document.querySelector('.menu');
        const userMenuItem = document.createElement('a');
        userMenuItem.href = '#';
        userMenuItem.className = 'menu-item';
        userMenuItem.setAttribute('data-section', 'userProduct');
        userMenuItem.innerHTML = '<i class="fas fa-shopping-bag"></i> <span>Interface Produits</span>';
        
        // Insérer après l'élément "Retour au site"
        const backToSiteItem = document.querySelector('.menu-item[href="index.html"]');
        menu.insertBefore(userMenuItem, backToSiteItem);

        // Ajouter l'événement click pour le nouvel élément
        userMenuItem.addEventListener('click', function(e) {
          e.preventDefault();
          
          // Mettre à jour le menu actif
          document.querySelectorAll('.menu-item').forEach(item => item.classList.remove('active'));
          this.classList.add('active');
          
          // Cacher toutes les sections
          document.querySelectorAll('.dashboard-section').forEach(section => {
            section.style.display = 'none';
          });
          
          // Afficher la section utilisateur produit
          document.getElementById('userProductSection').style.display = 'block';
          document.getElementById('dashboardTitle').innerHTML = 
            'Interface Produits <span class="tunisia-flag"><i class="fas fa-flag"></i> Tunisie</span>';
          
          // Initialiser l'interface utilisateur
          initUserProductInterface();
        });

        // Initialiser le bouton retour au tableau de bord
        document.getElementById('backToDashboardBtn')?.addEventListener('click', function() {
          document.querySelector('.menu-item[data-section="dashboard"]').click();
        });
      });

      // Fonction d'initialisation de l'interface utilisateur produit
      function initUserProductInterface() {
        // Initialiser les onglets
        initUserTabs();
        
        // Charger les produits dans les différentes vues
        loadProductGrid();
        loadProductSelectionGrid();
        
        // Initialiser les formulaires
        initAddProductForm();
        initOrderProcess();
        
        // Initialiser la recherche
        initProductSearch();
        
        // Initialiser les filtres
        initProductFilters();
      }

      // Initialisation des onglets de l'interface utilisateur
      function initUserTabs() {
        const tabs = document.querySelectorAll('.nav-tab');
        const tabContents = document.querySelectorAll('.user-tab-content');
        
        tabs.forEach(tab => {
          tab.addEventListener('click', function() {
            const tabId = this.getAttribute('data-tab');
            
            // Désactiver tous les onglets
            tabs.forEach(t => t.classList.remove('active'));
            tabContents.forEach(c => c.classList.remove('active'));
            
            // Activer l'onglet cliqué
            this.classList.add('active');
            document.getElementById(tabId + 'Tab').classList.add('active');
          });
        });
      }

      // Charger la grille de produits
      function loadProductGrid() {
        const productGrid = document.getElementById('productGrid');
        if (!productGrid) return;
        
        productGrid.innerHTML = '';
        
        tunisianData.products.forEach(product => {
          const productCard = document.createElement('div');
          productCard.className = 'product-card';
          productCard.innerHTML = `
            <div class="product-card-header">
              <img src="${product.image}" alt="${product.name}" class="product-card-image">
              <span class="product-card-category">${product.category}</span>
            </div>
            <div class="product-card-body">
              <h4 class="product-card-title">${product.name}</h4>
              <p class="product-card-description">Produit premium pour ${product.category.toLowerCase()} - qualité supérieure</p>
              <div class="product-card-price">
                <span class="price-dt">${product.price}</span>
              </div>
              <div class="product-card-stock ${product.stock > 0 ? 'in-stock' : 'out-of-stock'}">
                <i class="fas ${product.stock > 0 ? 'fa-check-circle' : 'fa-times-circle'}"></i>
                ${product.stock > 0 ? `${product.stock} en stock` : 'Rupture de stock'}
              </div>
            </div>
            <div class="product-card-actions">
              <button class="btn btn-sm btn-primary view-product-btn" data-id="${product.id}">
                <i class="fas fa-eye"></i> Voir
              </button>
              <button class="btn btn-sm btn-success order-product-btn" data-id="${product.id}" ${product.stock === 0 ? 'disabled' : ''}>
                <i class="fas fa-shopping-cart"></i> Commander
              </button>
            </div>
          `;
          
          productGrid.appendChild(productCard);
        });
        
        // Ajouter les événements aux boutons
        document.querySelectorAll('.view-product-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const productId = parseInt(this.getAttribute('data-id'));
            viewProductDetails(productId);
            // Passer à l'onglet "Consulter"
            document.querySelector('.nav-tab[data-tab="view"]').click();
          });
        });
        
        document.querySelectorAll('.order-product-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const productId = parseInt(this.getAttribute('data-id'));
            startOrderProcess(productId);
            // Passer à l'onglet "Commander"
            document.querySelector('.nav-tab[data-tab="order"]').click();
          });
        });
      }

      // Charger la grille de sélection de produits pour la commande
      function loadProductSelectionGrid() {
        const selectionGrid = document.getElementById('productSelectionGrid');
        if (!selectionGrid) return;
        
        selectionGrid.innerHTML = '';
        
        tunisianData.products.forEach(product => {
          if (product.stock > 0) {
            const productCard = document.createElement('div');
            productCard.className = 'product-select-card';
            productCard.setAttribute('data-product-id', product.id);
            productCard.innerHTML = `
              <div class="product-select-image">
                <img src="${product.image}" alt="${product.name}">
              </div>
              <div class="product-select-info">
                <h5>${product.name}</h5>
                <div class="product-select-price">
                  <span class="price-dt">${product.price}</span>
                </div>
                <div class="product-select-stock">
                  Stock: ${product.stock} unités
                </div>
                <button class="btn btn-sm btn-primary select-product-btn">
                  <i class="fas fa-check"></i> Sélectionner
                </button>
              </div>
            `;
            
            selectionGrid.appendChild(productCard);
          }
        });
        
        // Ajouter les événements de sélection
        document.querySelectorAll('.select-product-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const productCard = this.closest('.product-select-card');
            const productId = parseInt(productCard.getAttribute('data-product-id'));
            
            // Désélectionner toutes les cartes
            document.querySelectorAll('.product-select-card').forEach(card => {
              card.classList.remove('selected');
            });
            
            // Sélectionner cette carte
            productCard.classList.add('selected');
            
            // Activer le bouton suivant
            document.getElementById('nextToStep2Btn').disabled = false;
            
            // Stocker l'ID du produit sélectionné
            window.selectedProductId = productId;
            
            // Précharger les infos pour l'étape 2
            preloadStep2Info(productId);
          });
        });
      }

      // Précharger les informations pour l'étape 2
      function preloadStep2Info(productId) {
        const product = tunisianData.products.find(p => p.id === productId);
        if (!product) return;
        
        // Mettre à jour les informations dans l'étape 2
        document.getElementById('summaryProductName').textContent = product.name;
        document.getElementById('summaryUnitPrice').textContent = product.price;
        document.getElementById('availableStock').textContent = product.stock;
        
        // Mettre à jour la quantité maximum
        const quantityInput = document.getElementById('orderQuantity');
        quantityInput.max = product.stock;
        
        // Calculer le total initial
        updateOrderSummary();
      }

      // Afficher les détails d'un produit
      function viewProductDetails(productId) {
        const product = tunisianData.products.find(p => p.id === productId);
        if (!product) {
          showNotificationToast('Produit non trouvé');
          return;
        }
        
        // Mettre à jour les éléments du DOM
        document.getElementById('productDetailsName').textContent = product.name;
        document.getElementById('productDetailsCategory').textContent = product.category;
        document.getElementById('productDetailsPrice').textContent = product.price;
        document.getElementById('productDetailsStock').textContent = product.stock;
        document.getElementById('productDetailsSupplier').textContent = product.supplier;
        document.getElementById('productDetailsImage').src = product.image;
        document.getElementById('productDetailsImage').alt = product.name;
        
        // Générer une description
        const description = `Produit ${product.category.toLowerCase()} de haute qualité. ${product.name} est spécialement formulé pour répondre aux besoins nutritionnels de votre animal. Stock disponible: ${product.stock} unités.`;
        document.getElementById('productDetailsDescription').textContent = description;
        
        // Afficher la carte
        document.getElementById('productDetailsCard').style.display = 'block';
        
        // Ajouter l'événement au bouton "Commander ce produit"
        document.getElementById('orderThisProductBtn').onclick = function() {
          startOrderProcess(productId);
          document.querySelector('.nav-tab[data-tab="order"]').click();
        };
      }

      // Initialiser le formulaire d'ajout de produit
      function initAddProductForm() {
        const form = document.getElementById('addProductForm');
        if (!form) return;
        
        form.addEventListener('submit', function(e) {
          e.preventDefault();
          
          // Récupérer les valeurs du formulaire
          const name = document.getElementById('newProductName').value;
          const category = document.getElementById('newProductCategory').value;
          const price = parseFloat(document.getElementById('newProductPrice').value);
          const stock = parseInt(document.getElementById('newProductStock').value);
          const supplier = document.getElementById('newProductSupplier').value;
          const image = document.getElementById('newProductImage').value;
          const description = document.getElementById('newProductDescription').value;
          
          // Validation
          if (!name || !category || isNaN(price) || isNaN(stock)) {
            showNotificationToast('Veuillez remplir tous les champs obligatoires');
            return;
          }
          
          // Générer un ID unique
          const newId = Math.max(...tunisianData.products.map(p => p.id)) + 1;
          
          // Image par défaut si non fournie
          const productImage = image || 'https://images.unsplash.com/photo-1589924691995-400dc9ecc119?w=150&h=150&fit=crop';
          
          // Créer le nouveau produit
          const newProduct = {
            id: newId,
            name: name,
            category: category.charAt(0).toUpperCase() + category.slice(1),
            price: price.toFixed(3),
            stock: stock,
            supplier: supplier || 'Fournisseur TN',
            image: productImage
          };
          
          // Ajouter au tableau de données
          tunisianData.products.push(newProduct);
          
          // Mettre à jour les vues
          loadProductGrid();
          loadProductSelectionGrid();
          
          // Ajouter à l'historique
          addToHistory(
            'Nouveau produit ajouté',
            `Produit "${name}" ajouté au catalogue`,
            'Utilisateur'
          );
          
          // Ajouter une notification
          addNotification(
            'Nouveau produit',
            `Le produit "${name}" a été ajouté au catalogue`,
            'fa-box'
          );
          
          // Afficher un message de succès
          showNotificationToast(`Produit "${name}" ajouté avec succès !`);
          
          // Réinitialiser le formulaire
          form.reset();
          
          // Revenir à l'onglet "Parcourir"
          setTimeout(() => {
            document.querySelector('.nav-tab[data-tab="browse"]').click();
          }, 1500);
        });
      }

      // Initialiser le processus de commande
      function initOrderProcess() {
        // Variables globales pour le processus de commande
        window.selectedProductId = null;
        window.selectedQuantity = 1;
        window.orderData = {};
        
        // Navigation entre les étapes
        const steps = document.querySelectorAll('.step');
        const stepContents = document.querySelectorAll('.order-step-content');
        
        // Fonction pour passer à une étape
        function goToStep(stepNumber) {
          // Mettre à jour les étapes
          steps.forEach(step => {
            const stepIndex = parseInt(step.getAttribute('data-step'));
            step.classList.toggle('active', stepIndex === stepNumber);
            step.classList.toggle('completed', stepIndex < stepNumber);
          });
          
          // Mettre à jour le contenu
          stepContents.forEach(content => {
            const contentStep = parseInt(content.getAttribute('data-step'));
            content.classList.toggle('active', contentStep === stepNumber);
          });
        }
        
        // Étape 1 -> Étape 2
        document.getElementById('nextToStep2Btn')?.addEventListener('click', function() {
          if (window.selectedProductId) {
            goToStep(2);
            updateSelectedProductInfo();
          }
        });
        
        // Étape 2 -> Étape 1
        document.getElementById('backToStep1Btn')?.addEventListener('click', function() {
          goToStep(1);
        });
        
        // Étape 2 -> Étape 3
        document.getElementById('nextToStep3Btn')?.addEventListener('click', function() {
          // Valider la quantité
          const quantity = parseInt(document.getElementById('orderQuantity').value);
          const product = tunisianData.products.find(p => p.id === window.selectedProductId);
          
          if (quantity < 1 || quantity > product.stock) {
            showNotificationToast(`Veuillez entrer une quantité valide (1-${product.stock})`);
            return;
          }
          
          window.selectedQuantity = quantity;
          goToStep(3);
          
          // Définir la date minimum de livraison (demain)
          const tomorrow = new Date();
          tomorrow.setDate(tomorrow.getDate() + 1);
          document.getElementById('deliveryDate').min = tomorrow.toISOString().split('T')[0];
        });
        
        // Étape 3 -> Étape 2
        document.getElementById('backToStep2Btn2')?.addEventListener('click', function() {
          goToStep(2);
        });
        
        // Étape 3 -> Étape 4
        document.getElementById('nextToStep4Btn')?.addEventListener('click', function() {
          // Valider le formulaire de livraison
          const name = document.getElementById('customerName').value;
          const phone = document.getElementById('customerPhone').value;
          const address = document.getElementById('deliveryAddress').value;
          const city = document.getElementById('deliveryCity').value;
          const date = document.getElementById('deliveryDate').value;
          
          if (!name || !phone || !address || !city || !date) {
            showNotificationToast('Veuillez remplir tous les champs obligatoires');
            return;
          }
          
          // Stocker les données
          window.orderData = {
            customerName: name,
            customerPhone: phone,
            deliveryAddress: address,
            deliveryCity: city,
            deliveryDate: date,
            notes: document.getElementById('orderNotes').value
          };
          
          goToStep(4);
          updateFinalOrderSummary();
        });
        
        // Étape 4 -> Étape 3
        document.getElementById('backToStep3Btn')?.addEventListener('click', function() {
          goToStep(3);
        });
        
        // Confirmer la commande
        document.getElementById('confirmOrderBtn')?.addEventListener('click', function() {
          confirmOrder();
        });
        
        // Nouvelle commande
        document.getElementById('newOrderBtn')?.addEventListener('click', function() {
          resetOrderProcess();
          goToStep(1);
        });
        
        // Imprimer le reçu
        document.getElementById('printOrderBtn')?.addEventListener('click', function() {
          window.print();
        });
        
        // Gestion de la quantité
        document.getElementById('increaseQuantity')?.addEventListener('click', function() {
          const input = document.getElementById('orderQuantity');
          const max = parseInt(input.max);
          const current = parseInt(input.value);
          if (current < max) {
            input.value = current + 1;
            updateOrderSummary();
          }
        });
        
        document.getElementById('decreaseQuantity')?.addEventListener('click', function() {
          const input = document.getElementById('orderQuantity');
          const current = parseInt(input.value);
          if (current > 1) {
            input.value = current - 1;
            updateOrderSummary();
          }
        });
        
        document.getElementById('orderQuantity')?.addEventListener('input', function() {
          updateOrderSummary();
        });
      }

      // Mettre à jour les informations du produit sélectionné
      function updateSelectedProductInfo() {
        const product = tunisianData.products.find(p => p.id === window.selectedProductId);
        if (!product) return;
        
        const container = document.getElementById('selectedProductInfo');
        container.innerHTML = `
          <div class="selected-product-card">
            <img src="${product.image}" alt="${product.name}">
            <div class="selected-product-details">
              <h5>${product.name}</h5>
              <div class="selected-product-price">
                <span class="price-dt">${product.price}</span> par unité
              </div>
              <div class="selected-product-category">
                Catégorie: ${product.category}
              </div>
            </div>
          </div>
        `;
      }

      // Mettre à jour le récapitulatif de commande
      function updateOrderSummary() {
        const product = tunisianData.products.find(p => p.id === window.selectedProductId);
        if (!product) return;
        
        const quantity = parseInt(document.getElementById('orderQuantity').value) || 1;
        const unitPrice = parseFloat(product.price);
        const total = unitPrice * quantity;
        
        document.getElementById('summaryQuantity').textContent = quantity;
        document.getElementById('summaryTotalPrice').textContent = total.toFixed(3);
      }

      // Mettre à jour le récapitulatif final
      function updateFinalOrderSummary() {
        const product = tunisianData.products.find(p => p.id === window.selectedProductId);
        if (!product) return;
        
        const unitPrice = parseFloat(product.price);
        const total = unitPrice * window.selectedQuantity;
        
        const summaryHTML = `
          <div class="final-summary">
            <h5>Récapitulatif de votre commande</h5>
            <div class="summary-section">
              <h6><i class="fas fa-box"></i> Produit</h6>
              <div class="summary-item">
                <span>${product.name}</span>
                <span>${window.selectedQuantity} × <span class="price-dt">${product.price}</span></span>
              </div>
            </div>
            
            <div class="summary-section">
              <h6><i class="fas fa-user"></i> Informations client</h6>
              <div class="summary-item">
                <span>Nom</span>
                <span>${window.orderData.customerName}</span>
              </div>
              <div class="summary-item">
                <span>Téléphone</span>
                <span>${window.orderData.customerPhone}</span>
              </div>
            </div>
            
            <div class="summary-section">
              <h6><i class="fas fa-truck"></i> Livraison</h6>
              <div class="summary-item">
                <span>Adresse</span>
                <span>${window.orderData.deliveryAddress}</span>
              </div>
              <div class="summary-item">
                <span>Ville</span>
                <span>${window.orderData.deliveryCity}</span>
              </div>
              <div class="summary-item">
                <span>Date souhaitée</span>
                <span>${window.orderData.deliveryDate}</span>
              </div>
              ${window.orderData.notes ? `
              <div class="summary-item">
                <span>Notes</span>
                <span>${window.orderData.notes}</span>
              </div>` : ''}
            </div>
            
            <div class="summary-section total-section">
              <div class="summary-item total">
                <span>Total à payer</span>
                <span class="price-dt">${total.toFixed(3)}</span>
              </div>
            </div>
          </div>
        `;
        
        document.getElementById('orderFinalSummary').innerHTML = summaryHTML;
      }

      // Confirmer la commande
      function confirmOrder() {
        const product = tunisianData.products.find(p => p.id === window.selectedProductId);
        if (!product) return;
        
        // Générer un numéro de commande
        const orderNumber = 'CMD' + Date.now().toString().slice(-6);
        
        // Mettre à jour le stock
        product.stock -= window.selectedQuantity;
        
        // Créer la nouvelle commande
        const total = parseFloat(product.price) * window.selectedQuantity;
        const newOrder = {
          id: parseInt(orderNumber.slice(3)),
          customer: window.orderData.customerName,
          city: window.orderData.deliveryCity,
          animal: "Chien/Chat (selon produit)",
          products: `${product.name} (x${window.selectedQuantity})`,
          date: new Date().toISOString().split('T')[0],
          amount: total.toFixed(3),
          status: 'pending'
        };
        
        // Ajouter à la liste des commandes
        tunisianData.orders.unshift(newOrder);
        
        // Mettre à jour les vues
        loadRecentOrders();
        loadOrders();
        loadProductGrid();
        loadProductSelectionGrid();
        updateStats();
        
        // Afficher le message de confirmation
        document.getElementById('confirmationSuccess').style.display = 'block';
        document.getElementById('orderNumber').textContent = '#' + orderNumber;
        document.getElementById('confirmationMessage').textContent = 
          `Merci ${window.orderData.customerName} ! Votre commande de ${product.name} (x${window.selectedQuantity}) a été enregistrée.`;
        
        // Cacher les boutons de confirmation
        document.getElementById('confirmationActions').style.display = 'none';
        
        // Afficher les boutons d'impression/nouvelle commande
        document.getElementById('printActions').style.display = 'flex';
        
        // Ajouter à l'historique
        addToHistory(
          'Nouvelle commande client',
          `Commande ${orderNumber} de ${window.orderData.customerName} pour ${total.toFixed(3)} DT`,
          'Client'
        );
        
        // Ajouter une notification
        addNotification(
          'Nouvelle commande client',
          `${window.orderData.customerName} a passé une commande de ${total.toFixed(3)} DT`,
          'fa-cart-plus'
        );
        
        // Afficher une notification toast
        showNotificationToast(`Commande ${orderNumber} confirmée avec succès !`);
      }

      // Réinitialiser le processus de commande
      function resetOrderProcess() {
        // Réinitialiser les variables
        window.selectedProductId = null;
        window.selectedQuantity = 1;
        window.orderData = {};
        
        // Réinitialiser les formulaires
        document.getElementById('orderQuantity').value = 1;
        document.getElementById('customerName').value = '';
        document.getElementById('customerPhone').value = '';
        document.getElementById('deliveryAddress').value = '';
        document.getElementById('deliveryCity').value = '';
        document.getElementById('deliveryDate').value = '';
        document.getElementById('orderNotes').value = '';
        
        // Désélectionner toutes les cartes produit
        document.querySelectorAll('.product-select-card').forEach(card => {
          card.classList.remove('selected');
        });
        
        // Désactiver le bouton suivant de l'étape 1
        document.getElementById('nextToStep2Btn').disabled = true;
        
        // Réinitialiser les résumés
        document.getElementById('summaryProductName').textContent = '-';
        document.getElementById('summaryUnitPrice').textContent = '0.000';
        document.getElementById('summaryQuantity').textContent = '0';
        document.getElementById('summaryTotalPrice').textContent = '0.000';
        
        // Cacher le message de confirmation
        document.getElementById('confirmationSuccess').style.display = 'none';
        
        // Réafficher les boutons de confirmation
        document.getElementById('confirmationActions').style.display = 'flex';
        
        // Cacher les boutons d'impression
        document.getElementById('printActions').style.display = 'none';
        
        // Vider le récapitulatif final
        document.getElementById('orderFinalSummary').innerHTML = '';
      }

      // Initialiser la recherche de produit
      function initProductSearch() {
        document.getElementById('searchProductBtn')?.addEventListener('click', function() {
          const searchTerm = document.getElementById('productIdSearch').value.toLowerCase();
          
          if (!searchTerm.trim()) {
            showNotificationToast('Veuillez entrer un terme de recherche');
            return;
          }
          
          // Rechercher par ID ou nom
          let product = null;
          
          // Essayer par ID d'abord
          if (!isNaN(searchTerm)) {
            product = tunisianData.products.find(p => p.id === parseInt(searchTerm));
          }
          
          // Sinon chercher par nom
          if (!product) {
            product = tunisianData.products.find(p => 
              p.name.toLowerCase().includes(searchTerm)
            );
          }
          
          if (product) {
            viewProductDetails(product.id);
          } else {
            showNotificationToast('Aucun produit trouvé avec ce critère');
            document.getElementById('productDetailsCard').style.display = 'none';
          }
        });
      }

      // Initialiser les filtres de produit
      function initProductFilters() {
        document.getElementById('applyFiltersBtn')?.addEventListener('click', function() {
          const category = document.getElementById('categoryFilter').value;
          const sortBy = document.getElementById('priceFilter').value;
          
          let filteredProducts = [...tunisianData.products];
          
          // Filtrer par catégorie
          if (category !== 'all') {
            filteredProducts = filteredProducts.filter(p => 
              p.category.toLowerCase() === category
            );
          }
          
          // Trier
          switch(sortBy) {
            case 'name':
              filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
              break;
            case 'price-low':
              filteredProducts.sort((a, b) => parseFloat(a.price) - parseFloat(b.price));
              break;
            case 'price-high':
              filteredProducts.sort((a, b) => parseFloat(b.price) - parseFloat(a.price));
              break;
            case 'stock':
              filteredProducts.sort((a, b) => b.stock - a.stock);
              break;
          }
          
          // Mettre à jour la grille avec les produits filtrés
          updateProductGrid(filteredProducts);
        });
      }

      // Mettre à jour la grille de produits avec filtres
      function updateProductGrid(products) {
        const productGrid = document.getElementById('productGrid');
        if (!productGrid) return;
        
        productGrid.innerHTML = '';
        
        if (products.length === 0) {
          productGrid.innerHTML = `
            <div class="no-products">
              <i class="fas fa-search"></i>
              <h4>Aucun produit trouvé</h4>
              <p>Essayez de modifier vos critères de recherche</p>
            </div>
          `;
          return;
        }
        
        products.forEach(product => {
          const productCard = document.createElement('div');
          productCard.className = 'product-card';
          productCard.innerHTML = `
            <div class="product-card-header">
              <img src="${product.image}" alt="${product.name}" class="product-card-image">
              <span class="product-card-category">${product.category}</span>
            </div>
            <div class="product-card-body">
              <h4 class="product-card-title">${product.name}</h4>
              <p class="product-card-description">Produit premium pour ${product.category.toLowerCase()} - qualité supérieure</p>
              <div class="product-card-price">
                <span class="price-dt">${product.price}</span>
              </div>
              <div class="product-card-stock ${product.stock > 0 ? 'in-stock' : 'out-of-stock'}">
                <i class="fas ${product.stock > 0 ? 'fa-check-circle' : 'fa-times-circle'}"></i>
                ${product.stock > 0 ? `${product.stock} en stock` : 'Rupture de stock'}
              </div>
            </div>
            <div class="product-card-actions">
              <button class="btn btn-sm btn-primary view-product-btn" data-id="${product.id}">
                <i class="fas fa-eye"></i> Voir
              </button>
              <button class="btn btn-sm btn-success order-product-btn" data-id="${product.id}" ${product.stock === 0 ? 'disabled' : ''}>
                <i class="fas fa-shopping-cart"></i> Commander
              </button>
            </div>
          `;
          
          productGrid.appendChild(productCard);
        });
        
        // Réattacher les événements
        document.querySelectorAll('.view-product-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const productId = parseInt(this.getAttribute('data-id'));
            viewProductDetails(productId);
            document.querySelector('.nav-tab[data-tab="view"]').click();
          });
        });
        
        document.querySelectorAll('.order-product-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const productId = parseInt(this.getAttribute('data-id'));
            startOrderProcess(productId);
            document.querySelector('.nav-tab[data-tab="order"]').click();
          });
        });
      }

      // Démarrer le processus de commande pour un produit spécifique
      function startOrderProcess(productId) {
        window.selectedProductId = productId;
        
        // Aller à l'onglet "Commander"
        document.querySelector('.nav-tab[data-tab="order"]').click();
        
        // Sélectionner automatiquement le produit
        setTimeout(() => {
          const productCard = document.querySelector(`.product-select-card[data-product-id="${productId}"]`);
          if (productCard) {
            productCard.classList.add('selected');
            document.getElementById('nextToStep2Btn').disabled = false;
            preloadStep2Info(productId);
          }
          
          // Aller à l'étape 1
          goToStep(1);
        }, 100);
      }

      // Fonction pour naviguer vers une étape (déjà définie)
      function goToStep(stepNumber) {
        const steps = document.querySelectorAll('.step');
        const stepContents = document.querySelectorAll('.order-step-content');
        
        steps.forEach(step => {
          const stepIndex = parseInt(step.getAttribute('data-step'));
          step.classList.toggle('active', stepIndex === stepNumber);
          step.classList.toggle('completed', stepIndex < stepNumber);
        });
        
        stepContents.forEach(content => {
          const contentStep = parseInt(content.getAttribute('data-step'));
          content.classList.toggle('active', contentStep === stepNumber);
        });
      }
    </script>

    <style>
      /* Styles CSS pour l'interface utilisateur produit */
      
      /* Navigation par onglets */
      .user-nav-tabs {
        margin-bottom: 30px;
        background-color: var(--card-bg);
        border-radius: 12px;
        overflow: hidden;
      }
      
      .nav-tabs-container {
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
        padding: 15px;
      }
      
      .nav-tab {
        flex: 1;
        min-width: 150px;
        padding: 15px 20px;
        background-color: var(--bg-color);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        color: var(--text-color);
        transition: var(--transition);
        text-align: center;
        border: 2px solid transparent;
      }
      
      .nav-tab:hover {
        background-color: var(--primary-light);
        color: white;
      }
      
      .nav-tab.active {
        background-color: var(--primary-color);
        color: white;
        border-color: var(--secondary-color);
      }
      
      /* Contenu des onglets */
      .user-tab-content {
        display: none;
        animation: fadeIn 0.5s ease;
      }
      
      .user-tab-content.active {
        display: block;
      }
      
      .tab-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        padding: 20px;
        background-color: var(--card-bg);
        border-radius: 12px;
      }
      
      .tab-header h3 {
        color: var(--primary-color);
        font-size: 1.4rem;
      }
      
      /* Grille de produits */
      .product-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 25px;
        margin-top: 20px;
      }
      
      .product-card {
        background-color: var(--bg-color);
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 5px 15px var(--shadow);
        transition: var(--transition);
        border: 1px solid var(--card-bg);
      }
      
      .product-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px var(--shadow);
      }
      
      .product-card-header {
        position: relative;
        height: 180px;
        overflow: hidden;
      }
      
      .product-card-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
      }
      
      .product-card:hover .product-card-image {
        transform: scale(1.05);
      }
      
      .product-card-category {
        position: absolute;
        top: 15px;
        right: 15px;
        background-color: var(--primary-color);
        color: white;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
      }
      
      .product-card-body {
        padding: 20px;
      }
      
      .product-card-title {
        font-size: 1.2rem;
        margin-bottom: 10px;
        color: var(--primary-color);
      }
      
      .product-card-description {
        font-size: 0.9rem;
        opacity: 0.8;
        margin-bottom: 15px;
        line-height: 1.5;
      }
      
      .product-card-price {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--success-color);
        margin-bottom: 10px;
      }
      
      .product-card-stock {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.9rem;
        padding: 5px 10px;
        border-radius: 15px;
        display: inline-block;
      }
      
      .product-card-stock.in-stock {
        background-color: rgba(16, 185, 129, 0.2);
        color: var(--success-color);
      }
      
      .product-card-stock.out-of-stock {
        background-color: rgba(239, 68, 68, 0.2);
        color: var(--danger-color);
      }
      
      .product-card-actions {
        padding: 15px 20px;
        border-top: 1px solid var(--card-bg);
        display: flex;
        gap: 10px;
      }
      
      .btn-sm {
        padding: 8px 15px;
        font-size: 0.85rem;
      }
      
      /* Filtres de produits */
      .product-filters {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        padding: 20px;
        background-color: var(--card-bg);
        border-radius: 12px;
        margin-bottom: 20px;
        align-items: flex-end;
      }
      
      .filter-group {
        flex: 1;
        min-width: 200px;
      }
      
      .filter-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: var(--primary-color);
      }
      
      .filter-group select {
        width: 100%;
        padding: 12px;
        border-radius: 8px;
        border: 1px solid var(--card-bg);
        background-color: var(--bg-color);
        color: var(--text-color);
        transition: var(--transition);
      }
      
      .filter-group select:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
      }
      
      /* Boîte de recherche */
      .search-box {
        position: relative;
        width: 300px;
      }
      
      .search-box input {
        width: 100%;
        padding: 12px 45px 12px 15px;
        border-radius: 8px;
        border: 1px solid var(--card-bg);
        background-color: var(--bg-color);
        color: var(--text-color);
        transition: var(--transition);
      }
      
      .search-box input:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
      }
      
      .search-box i {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--primary-color);
      }
      
      .search-box.large {
        display: flex;
        gap: 10px;
        width: 100%;
      }
      
      .search-box.large input {
        flex: 1;
      }
      
      /* Détails du produit */
      .product-details-card {
        background-color: var(--bg-color);
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 5px 20px var(--shadow);
        margin-top: 20px;
      }
      
      .product-details-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 2px solid var(--card-bg);
      }
      
      .product-details-header h3 {
        font-size: 1.5rem;
        color: var(--primary-color);
      }
      
      .product-category-badge {
        background-color: var(--primary-color);
        color: white;
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: 600;
      }
      
      .product-details-body {
        display: grid;
        grid-template-columns: 300px 1fr;
        gap: 30px;
      }
      
      .product-image-large {
        width: 300px;
        height: 300px;
        border-radius: 12px;
        overflow: hidden;
      }
      
      .product-image-large img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      
      .product-info {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }
      
      .info-row {
        display: flex;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid var(--card-bg);
      }
      
      .info-label {
        width: 150px;
        font-weight: 600;
        color: var(--primary-color);
      }
      
      .info-value {
        flex: 1;
      }
      
      .product-description {
        margin-top: 20px;
        padding: 20px;
        background-color: var(--card-bg);
        border-radius: 8px;
        line-height: 1.6;
      }
      
      .product-actions {
        display: flex;
        gap: 15px;
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid var(--card-bg);
      }
      
      .btn-secondary {
        background-color: var(--card-bg);
        color: var(--text-color);
        border: 1px solid var(--card-bg);
      }
      
      .btn-secondary:hover {
        background-color: var(--primary-light);
        color: white;
      }
      
      /* Formulaire d'ajout de produit */
      .add-product-form-container {
        background-color: var(--bg-color);
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 5px 20px var(--shadow);
      }
      
      .form-row {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
      }
      
      .form-group.half {
        flex: 1;
      }
      
      .form-hint {
        display: block;
        margin-top: 5px;
        font-size: 0.85rem;
        opacity: 0.7;
      }
      
      .form-actions {
        display: flex;
        gap: 15px;
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid var(--card-bg);
      }
      
      /* Processus de commande */
      .order-steps {
        display: flex;
        justify-content: space-between;
        margin-bottom: 40px;
        position: relative;
      }
      
      .order-steps::before {
        content: '';
        position: absolute;
        top: 25px;
        left: 10%;
        right: 10%;
        height: 3px;
        background-color: var(--card-bg);
        z-index: 1;
      }
      
      .step {
        position: relative;
        z-index: 2;
        text-align: center;
        flex: 1;
      }
      
      .step-number {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background-color: var(--card-bg);
        color: var(--text-color);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 1.2rem;
        margin: 0 auto 10px;
        transition: var(--transition);
      }
      
      .step.active .step-number {
        background-color: var(--primary-color);
        color: white;
        transform: scale(1.1);
        box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
      }
      
      .step.completed .step-number {
        background-color: var(--success-color);
        color: white;
      }
      
      .step-label {
        font-size: 0.9rem;
        color: var(--text-color);
        font-weight: 500;
      }
      
      .step.active .step-label {
        color: var(--primary-color);
        font-weight: 600;
      }
      
      .order-step-content {
        display: none;
        animation: fadeIn 0.5s ease;
      }
      
      .order-step-content.active {
        display: block;
      }
      
      /* Grille de sélection de produit */
      .product-selection-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
        margin: 25px 0;
      }
      
      .product-select-card {
        background-color: var(--bg-color);
        border: 2px solid var(--card-bg);
        border-radius: 12px;
        padding: 20px;
        cursor: pointer;
        transition: var(--transition);
        display: flex;
        gap: 15px;
        align-items: center;
      }
      
      .product-select-card:hover {
        border-color: var(--primary-light);
        transform: translateY(-5px);
      }
      
      .product-select-card.selected {
        border-color: var(--primary-color);
        background-color: rgba(59, 130, 246, 0.1);
        box-shadow: 0 5px 15px rgba(59, 130, 246, 0.2);
      }
      
      .product-select-image {
        width: 80px;
        height: 80px;
        border-radius: 8px;
        overflow: hidden;
        flex-shrink: 0;
      }
      
      .product-select-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      
      .product-select-info {
        flex: 1;
      }
      
      .product-select-info h5 {
        margin-bottom: 8px;
        color: var(--primary-color);
      }
      
      .product-select-price {
        font-weight: bold;
        color: var(--success-color);
        margin-bottom: 5px;
      }
      
      .product-select-stock {
        font-size: 0.85rem;
        opacity: 0.8;
        margin-bottom: 10px;
      }
      
      /* Sélecteur de quantité */
      .quantity-selector {
        background-color: var(--card-bg);
        padding: 25px;
        border-radius: 12px;
        margin: 25px 0;
      }
      
      .quantity-selector label {
        display: block;
        margin-bottom: 15px;
        font-weight: 600;
        color: var(--primary-color);
        font-size: 1.1rem;
      }
      
      .quantity-controls {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 15px;
      }
      
      .quantity-btn {
        width: 50px;
        height: 50px;
        border-radius: 8px;
        border: 2px solid var(--primary-color);
        background-color: var(--bg-color);
        color: var(--primary-color);
        font-size: 1.5rem;
        font-weight: bold;
        cursor: pointer;
        transition: var(--transition);
      }
      
      .quantity-btn:hover {
        background-color: var(--primary-color);
        color: white;
      }
      
      #orderQuantity {
        width: 100px;
        height: 50px;
        text-align: center;
        font-size: 1.2rem;
        font-weight: bold;
        border: 2px solid var(--card-bg);
        border-radius: 8px;
        background-color: var(--bg-color);
        color: var(--text-color);
      }
      
      .quantity-stock {
        font-size: 0.9rem;
        opacity: 0.8;
      }
      
      /* Récapitulatif de commande */
      .order-summary-preview {
        background-color: var(--bg-color);
        padding: 25px;
        border-radius: 12px;
        border: 2px solid var(--card-bg);
        margin: 25px 0;
      }
      
      .order-summary-preview h5 {
        margin-bottom: 20px;
        color: var(--primary-color);
        font-size: 1.2rem;
      }
      
      .summary-row {
        display: flex;
        justify-content: space-between;
        padding: 10px 0;
        border-bottom: 1px solid var(--card-bg);
      }
      
      .summary-row.total {
        border-bottom: none;
        font-weight: bold;
        font-size: 1.2rem;
        margin-top: 10px;
        padding-top: 15px;
        border-top: 2px solid var(--primary-color);
      }
      
      /* Informations du produit sélectionné */
      .selected-product-info {
        background-color: var(--card-bg);
        padding: 20px;
        border-radius: 12px;
        margin: 25px 0;
      }
      
      .selected-product-card {
        display: flex;
        gap: 20px;
        align-items: center;
      }
      
      .selected-product-card img {
        width: 100px;
        height: 100px;
        border-radius: 8px;
        object-fit: cover;
      }
      
      .selected-product-details h5 {
        font-size: 1.2rem;
        color: var(--primary-color);
        margin-bottom: 8px;
      }
      
      /* Formulaire de livraison */
      .delivery-form {
        background-color: var(--bg-color);
        padding: 30px;
        border-radius: 12px;
        margin: 25px 0;
        border: 2px solid var(--card-bg);
      }
      
      /* Confirmation de commande */
      .order-confirmation {
        background-color: var(--bg-color);
        padding: 30px;
        border-radius: 12px;
        margin: 25px 0;
        border: 2px solid var(--card-bg);
      }
      
      .confirmation-success {
        text-align: center;
        padding: 40px 20px;
      }
      
      .success-icon {
        font-size: 4rem;
        color: var(--success-color);
        margin-bottom: 20px;
      }
      
      .confirmation-success h5 {
        font-size: 1.5rem;
        color: var(--success-color);
        margin-bottom: 15px;
      }
      
      .order-number {
        margin-top: 25px;
        padding: 15px;
        background-color: var(--card-bg);
        border-radius: 8px;
        font-size: 1.2rem;
      }
      
      .final-summary {
        background-color: var(--card-bg);
        padding: 25px;
        border-radius: 12px;
        margin: 25px 0;
      }
      
      .summary-section {
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      }
      
      .dark-mode .summary-section {
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }
      
      .summary-section h6 {
        color: var(--primary-color);
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      
      .summary-item {
        display: flex;
        justify-content: space-between;
        padding: 10px 0;
      }
      
      .summary-item.total {
        font-weight: bold;
        font-size: 1.2rem;
        padding-top: 15px;
        margin-top: 15px;
        border-top: 2px solid var(--primary-color);
      }
      
      .total-section {
        border-bottom: none;
        padding-bottom: 0;
      }
      
      /* Actions d'étape */
      .step-actions {
        display: flex;
        justify-content: space-between;
        margin-top: 40px;
        padding-top: 20px;
        border-top: 1px solid var(--card-bg);
      }
      
      .confirmation-actions,
      .print-actions {
        display: flex;
        gap: 15px;
        margin-top: 30px;
      }
      
      /* Aucun produit */
      .no-products {
        text-align: center;
        padding: 60px 20px;
        grid-column: 1 / -1;
      }
      
      .no-products i {
        font-size: 4rem;
        color: var(--primary-light);
        margin-bottom: 20px;
        opacity: 0.5;
      }
      
      .no-products h4 {
        color: var(--primary-color);
        margin-bottom: 10px;
      }
      
      /* Animation */
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      /* Responsive */
      @media (max-width: 1024px) {
        .product-details-body {
          grid-template-columns: 1fr;
        }
        
        .product-image-large {
          width: 100%;
          max-width: 400px;
          margin: 0 auto;
        }
      }
      
      @media (max-width: 768px) {
        .nav-tabs-container {
          flex-direction: column;
        }
        
        .nav-tab {
          min-width: 100%;
        }
        
        .tab-header {
          flex-direction: column;
          gap: 20px;
          align-items: flex-start;
        }
        
        .search-box {
          width: 100%;
        }
        
        .form-row {
          flex-direction: column;
          gap: 0;
        }
        
        .product-filters {
          flex-direction: column;
        }
        
        .filter-group {
          min-width: 100%;
        }
        
        .order-steps {
          flex-wrap: wrap;
        }
        
        .step {
          flex: 0 0 calc(50% - 10px);
          margin-bottom: 20px;
        }
        
        .step-actions {
          flex-direction: column;
          gap: 15px;
        }
        
        .confirmation-actions,
        .print-actions {
          flex-direction: column;
        }
        
        .selected-product-card {
          flex-direction: column;
          text-align: center;
        }
      }
      
      @media (max-width: 480px) {
        .step {
          flex: 0 0 100%;
        }
        
        .product-grid {
          grid-template-columns: 1fr;
        }
        
        .product-selection-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </body>
</html>

